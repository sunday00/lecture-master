# kafka의 동작 방식
## 일반적인 메시지 큐
- 프로듀서가 메시지 생성
- 큐 버스에 푸시
- 컨슈머가 소비
- 자동으로 버스에는 먼저 들어온 메시지 제거

## kafka의 큐
- 프로듀서에서 메시지 생성
- 큐 버스에 푸시
- 컨슈머에서 메시지 획득하고 현재 오프셋 이동
- 일정 시간 경과후 오프셋 기준으로 읽어간 메시지들은 제거

## 파티션 처리와 고려사항
- 큐 파티션을 분할하면 디폴트로 라운드로빈 방식으로 큐를 사용
- 프로듀서는 차례로 분할된 파티션 큐로 메시지를 생성
- 컨슈머에서는 프로듀서 발행과는 무관하게 먼저 도착하는 메시지를 소비
  - 순서를 보장하지 않는다는 의미
- 큐의 순서가 중요한 서비스는 파티셔닝을 하지 않거나,
- 키를 지정해 일관된 파티션을 사용토록 하면 됨
- 그러나 이경우 분산처리의 장점을 상실하므로 신중히 정책 선택

