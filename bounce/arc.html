<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ARC</title>
  <style>
    svg {
      border: 1px solid;
      vertical-align: top;
      ;
    }

    .control {
      display: inline-block;
      width: 50%;
    }
  </style>
</head>

<body>
  <main>

    <svg width="400" height="400" viewBox="-200 -200 400 400">
      <path />
    </svg>
    <div class="control">
      <input type="hidden" name="ox" value="-150" />
      <input type="hidden" name="oy" value="100" />

      <p>
        타원X크기
        <input type="range" min="0" max="200" value="30" />
      </p>
      <p>
        타원y크기
        <input type="range" min="0" max="200" value="50" />
      </p>
      <!-- 타원xy는 45도 정도 기울여보면 확연히 보임 -->
      <p>
        회전각
        <input type="range" min="-90" max="90" value="0" />
      </p>
      <p>
        큰호?
        <input type="range" min="0" max="1" value="0" />
      </p>
      <p>
        방향
        <input type="range" min="0" max="1" value="1" />
      </p>
      <p>
        끝점X
        <input type="range" min="-200" max="200" value="150" />
      </p>
      <p>
        끝점Y
        <input type="range" min="-200" max="200" value="100" />
      </p>
    </div>

  </main>

  <script>
    let offset = { x: 0, y: 0 }
    const controls = document.querySelectorAll('.control input[type="range"]');

    function getOffset() {
      const x = document.querySelector('.control input[name="ox"]').value;
      const y = document.querySelector('.control input[name="oy"]').value;
      return `M ${x} ${y}`;
    }

    function getD() {
      let d = "A";
      controls.forEach((r, i) => {
        d += " " + r.value;
      });
      return getOffset() + " " + d;
    }

    function setD() {
      document.querySelector('main svg path').setAttribute('d', getD());
    }

    setD();

    controls.forEach((c, i) => {
      c.addEventListener('change', (e) => {
        setD();
      })
    });

    // const svg = document.querySelectorAll('svg');

    // function getD() {
    //   let d = "M ";
    //   circles.forEach((c, i) => {
    //     c.cx.baseVal.value = points[i].x
    //     c.cy.baseVal.value = points[i].y

    //     if (i === 0) {
    //       d += points[i].x + " " + points[i].y;
    //     } else if (i === 1) {
    //       d += (" Q " + points[i].x + " " + points[i].y);
    //     } else {
    //       d += (", " + points[i].x + " " + points[i].y);
    //     }
    //   });
    //   return d;
    // }

    // function setD(d) {
    //   path.setAttribute('d', d);
    // }
    // setD(getD());

    // function handleMD(e, i) {
    //   e.currentTarget.classList.add('click');
    //   e.currentTarget.dataset.order = i;
    // }

    // function handleMM(e) {
    //   const clicked = document.querySelector('.click')
    //   if (clicked) {
    //     const order = clicked.dataset.order;
    //     points[order].x = e.clientX - svg.viewBox.baseVal.width / 2;
    //     points[order].y = e.clientY - svg.viewBox.baseVal.height / 2;

    //     setD(getD());
    //   }
    // }

    // function handleMU(e) {
    //   const clicked = document.querySelector('.click')
    //   if (clicked) {
    //     clicked.classList.remove('click');
    //     console.log(getD());
    //   }
    // }
  </script>
</body>

</html>